/**
2016-12-8 
去掉跨域请求
*/
(function(){var i;var h={fat:[{"doaminFormat":/http.*.qa.nt.ctripcorp.ctripbuy.hk/,"writeUrl":""},{"doaminFormat":/http.*.qa.nt.ctripcorp.com/,"writeUrl":""}],uat:[{"doaminFormat":/http.*.uat.qa.nt.ctripcorp.ctripbuy.hk/,"writeUrl":""},{"doaminFormat":/http.*.uat.qa.nt.ctripcorp.com/,"writeUrl":""}],pro:[{"doaminFormat":/http.*.ctripbuy.hk/,"writeUrl":""},{"doaminFormat":/http.*.ctrip./,"writeUrl":""}]};var e={fat:["http://mall-pub-g.fat77.qa.nt.ctripcorp.com/mall/logout"],uat:["http://g.uat.qa.nt.ctripcorp.com/mall/mall/logout"],pro:["http://g.ctrip.com/mall/logout"]};function l(r){var n=[];if(location.host.indexOf(".fat")>=0||location.host.indexOf(".dev")>=0||location.host.indexOf(".localhost")>=0){n=r.fat}else{if(location.host.indexOf(".uat")>=0){n=r.uat}else{n=r.pro}}var o=document.location.origin;var m=[];for(var p=0;p<n.length;p++){var q=n[p];if(!q.doaminFormat.test(o)){m.push(q.writeUrl)}}return m}var a=0;function d(){a++}function j(m){var o=null;try{o=document.createElement("<iframe name='"+m+"'>")}catch(n){o=document.createElement("iframe");o.name=m}o.id=m;o.frameborder=0;o.scrolling="no";o.style.display="none";o.onload=d;o.src="javascript:;";document.body.appendChild(o)}function k(m){var n=[];for(var o=0;o<m.length;o++){var q=document.createElement("form");q.target="ifr"+o;q.name=q.id="form"+o;q.method="post";q.action=m[o];q.style.display="none";var p=document.createElement("input");p.type="hidden";p.name="ticket";p.value=i||c();q.appendChild(p);document.body.appendChild(q);n.push(q);j("ifr"+o)}return n}function g(r){var q=0;try{var m=l(r);var n=k(m);for(var p=0;p<n.length;p++){n[p].submit()}q=n.length}catch(o){q=0}return q}function c(){var m=(!!loginResult&&!!loginResult.ticketStr)?loginResult.ticketStr:sso_popLogin.getCookie("ticket_ctrip");return m}function b(o){i=o.ticket;var q=o.callback;var p=0;if(p==0){if(typeof q=="function"){q()}return}var n=0;var m=window.setInterval(function(){if(a>=p||n>=40){if(typeof q=="function"){q()}window.clearInterval(m)}n++},50)}function f(m){}return crossDomainCookie={postWriteCookie:b,postRemoveCookie:f}})();