/**
 * Ctrip JavaScript Code
 * http://www.ctrip.com/
 * Copyright(C) 2008 - 2017, Ctrip All rights reserved
 * @version v2.6.5
 */
!function(t,e){function n(){var t,e,n="_bfp=cookie",i=d.location.hostname.split(".");for(t=i.length-1;t>=0;t--)if(e="."+i.slice(t).join("."),d.cookie=n+";domain="+e+";",d.cookie.indexOf(n)>-1)return d.cookie=n.split("=")[0]+"=;domain="+e+";expires=Thu, 01 Jan 1970 00:00:01 GMT;",e}function i(t){if("string"!=typeof t)return 0;var e=document.location.hostname,n=e.substring(0,e.indexOf(t));if(n)for(var i=n.split("."),r=i.length-1;r>0;r--)t="."+i[r]+t,document.cookie="_bfa=;domain="+t+";path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;",document.cookie="_bfi=;domain="+t+";path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;",document.cookie="_bfs=;domain="+t+";path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;"}function r(t,e){var n=t>>16&65535,i=65535&t,r=e>>16&65535,o=65535&e;return((n*o+i*r&65535)<<16>>>0)+i*o}function o(t){var e,n,i=t.length,o="charCodeAt",a=i%4,s=i-a,c=1540483477;e=0^i;for(var u=0;u<s;)n=t[o](u++),n|=t[o](u++)<<8,n|=t[o](u++)<<16,n|=t[o](u++)<<24,n=r(n,c),n=(n^n>>>24)>>>0,n=r(n,c),e=r(e,c),e=(e^n)>>>0;switch(a){case 3:e=(e^t[o](u+2)<<16)>>>0;case 2:e=(e^t[o](u+1)<<8)>>>0;case 1:e^=t[o](u),e=r(e,c)}return e=(e^e>>>13)>>>0,e=r(e,c),e=(e^e>>>15)>>>0}function a(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t}function s(){var t="RID-"+o(h.pathname+h.search);return p.getCookie(t)}function c(e){var n="$_bf_uniq_"+p.now();t[n]=function(i){if(i.data){var r=i.data.token;if(C[i.data.scriptUrl])u(r,e);else{var o=i.data.scriptUrl;p.isIE&&(o="/code/ubt/fp-em-ie.js"),p.loadScript(p.RESOURCE_URL+o,{onScriptLoad:function(){u(r,e),C[i.data.scriptUrl]=!0}})}t[n]=null}},p.loadScript("//m.ctrip.com/restapi/soa2/11470/getToken.json?callback="+n,{})}function u(t,e){var n="",i="";if("undefined"!=typeof _bfp&&p.isFunction(_bfp)){var r={};r.canvas=document.createElement("canvas"),r.doNotCaptureKeyboard=1,r=_bfp(r);var o=r.cwrap("mixfp","string",["string"]),a=r.cwrap("authEncrypt","string",["string"]),n=p.encode(o(t)),i=p.encode(a(_.get_("vid")));_.track("fp",{vid:i,key:"securefp",val:n,duid:"",env:"online"})}e&&p.isFunction(e)&&e(p.JSON.stringify({vid:i,securefp:n}))}function f(t){var e=p.keys(t),n=e.length;if(n>8)return 8;for(var i=0;i<n;i++){var r=t[e[i]];if("string"==typeof r)t[e[i]]=r.substring(0,200);else if("number"!=typeof r)return 110}return 1}try{if(t.$_bf&&t.$_bf.loaded===!0)return;var l=t;l.$_bf=l.$_bf||{},l.$_bf.version="2.6.5",l.$_bf.loaded=!0;var d=l.document,h=d.location,p=p||{};p.RESOURCE_URL="//webresource.c-ctrip.com",p.PROTOCOL=h.protocol.indexOf("file:")!=-1?"http:":h.protocol,p.ENV=l.$_bf.env||"online",p.ishttps="https:"==p.PROTOCOL,p.CFG={domain:h.hostname.split(".").slice(-2).join(".")||"ctrip.com",referrer:!1,cv1:!1,orderID:"",cookiePath:"/",surl:p.PROTOCOL+"//s.c-ctrip.com/",href:h.href,dCollect:{},delay:0,debug:!1,third_modules:[{shouldLoad:function(){return!0},src:p.RESOURCE_URL+"/resaresonline/risk/ubtrms/latest/default/rms.js",option:{mask:"yyyymmdd",delay:300}}]};var g=Object.prototype.toString,v=Object.prototype.hasOwnProperty,m=function(){},y={undefined:"undefined",number:"number","boolean":"boolean",string:"string","[object Function]":"function","[object RegExp]":"regexp","[object Array]":"array","[object Date]":"date","[object Error]":"error","[object Object]":"object"},b={};p.now=Date.now||function(){return(new Date).getTime()},p.type=function(t){return y[typeof t]||y[g.call(t)]||(t?"object":"null")},p.isArray=function(t){return"array"===p.type(t)},p.isFunction=function(t){return"function"===p.type(t)},p.isNumber=function(t){return"number"==typeof t&&isFinite(t)},p.isEmpty=function(t){return void 0===t||"-"==t||""==t},p.getRand=function(){return(""+Math.random()).slice(-8)},p.keys=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)v.call(t,n)&&e.push(n);return e},p.extend=function(){var t,e,n,i=arguments[0]||{},r=1,o=arguments.length;for("boolean"==typeof i&&(i,i=arguments[r]||{},r++),"object"==typeof i||p.isFunction(i)||(i={}),r===o&&(i=this,r--);r<o;r++)if(null!=(n=arguments[r]))for(e in n)i[e],t=n[e],i!==t&&void 0!==t&&(i[e]=t);return i},p.hash=function(t){var e,n=1,i=0;if(!p.isEmpty(t))for(n=0,e=t.length-1;e>=0;e--)i=t.charCodeAt(e),n=(n<<6&268435455)+i+(i<<14),i=266338304&n,n=0!=i?n^i>>21:n;return n},p.$=function(t){return d.getElementById(t)},p.$v=function(t){var e=p.$(t);return e&&e.value||""},p.encode=function(t){return encodeURIComponent(t)},p.decode=function(t){return decodeURIComponent(t)},p.contains=function(t,e){return t.indexOf(e)>-1},p.getCookie=function(t,e,n){var i=new RegExp("(^| )"+t+"=([^;]*)(;|$)"),r=d.cookie.match(i);return r?n?p.decode(r[2]):r[2]:e||""},p.getCookieObj=function(t,e){var n,i={__k:t},r=[],o=p.getCookie(t,"",e);if(o){r=o.split("&")||[];for(var a=0;a<r.length;a++)n=r[a].split("="),n.length>1&&(i[n[0]]=n[1])}return i},p.setCookie=function(t,e,n){var i=p.CFG.domain?";domain="+p.CFG.domain:"",r="";if(n>=0){r=";expires="+new Date(p.now()+n).toUTCString()}d.cookie=t+"="+p.encode(e)+i+";path=/"+r},p.get=function(t,e){var n,i={};switch(e=e||{},i.v=e.v||"",i.w=e.w||"default",i.l=e.l||0,i.t=e.t||"string",i.w){case"input":n=p.$v(t);break;case"cookie":n=p.getCookie(t,i.v);break;case"function":n=p.isFunction(i.v)?i.v():"";break;case"object":break;default:n=i.v}switch(i.t){case"number":return parseInt(i.v,10)||0;case"boolean":return!!n;default:return i.l?String(n).substring(0,i.l):n}},p.getXpath=function(t){for(var e=[],n=0;t&&(e[n++]=t.nodeName+function(t){var e=0;if(!t.parentNode)return"";for(var n=t.parentNode.firstChild;n;){if(n==t)return 0==e?"":"["+(e+1)+"]";1==n.nodeType&&n.tagName==t.tagName&&e++,n=n.nextSibling}return""}(t),"HTML"!=t.tagName.toUpperCase());)t=t.parentNode;return e=e.reverse(),e.join("/")},p.send=function(t,e){if(p.CFG.debug)var n="http://localhost/bf.gif";else var n=p.CFG.surl+"bf.gif";n+="?"+t+"&mt="+p.now()+"&jv=2.6.5",p.isFunction(e)||(e=m);var i=new Image;i.width=1,i.height=1,i.onload=i.onreadystatechange=function(t){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(e(1),this.onload=this.onreadystatechange=null)},i.onerror=function(){i=i.onerror=i.onload=null,e(0)},i.src=n},p.on=function(){return d.addEventListener?function(t,e,n,i){t.addEventListener(e,n,i||!1)}:d.attachEvent?function(t,e,n){t.attachEvent("on"+e,n)}:m}(),p.off=function(){return d.addEventListener?function(t,e,n,i){t.removeEventListener(e,n,i||!1)}:d.attachEvent?function(t,e,n){t.detachEvent("on"+e,n)}:m}(),p.isSupportStorage=function(){var e=!1;if("undefined"!=typeof Storage)try{t.localStorage.setItem("_tmptest","tmpval"),e=!0,t.localStorage.removeItem("_tmptest")}catch(n){}return!!e}(),p.isSupportCookie=!0;p.getDateVer=function(t){var e=new Date,n=e.getFullYear(),i=e.getMonth(),r=e.getDate(),o={d:r,dd:a(r,2),m:i+1,mm:a(i+1),yy:e.getYear(),yyyy:n};return t.replace(/d{1,4}|m{1,2}|yy(?:yy)?/g,function(t){return o[t]||t})},p.loadScript=function(t,e){(e=e||{})&&e.mask&&(t+="?v="+p.getDateVer(e.mask));try{var n=!1,i=document.createElement("script");i.type="text/javascript",i.charset="utf-8",i.async=!0,e.id&&(i.id=e.id),i.onload=i.onreadystatechange=function(t){n||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(this.onload=this.onreadystatechange=null,n=!0,p.isFunction(e.onScriptLoad)&&e.onScriptLoad())},i.src=t;var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(i,r)}catch(o){}};var d=l.document,h=d.location;p.CLI=function(){var t=l.screen,e=l.navigator,n=t?t.colorDepth+"-bit":"",i=(e&&e.language?e.language:e&&e.browserLanguage?e.browserLanguage:"").toLowerCase(),r=e&&e.javaEnabled()?1:0;return{s:t,c:n,l:i,j:r,rid:s(),getRefer:function(){if(p.CFG.referrer)return p.CFG.referrer;var t="";try{t=d&&d.referrer}catch(e){}if(!t)try{l.opener&&(t=l.opener.location&&l.opener.location.href)}catch(e){}return p.CFG.referrer=String(t).substring(0,500),p.CFG.referrer},getHash:function(){for(var o=l.history.length,a=[e.appName,e.appVersion,i,e.platform,e.userAgent,r,t.width+t.height,n,d.cookie?d.cookie:"",d.referrer?d.referrer:""].join(""),s=a.length;o>0;)a+=o--^s++;return p.hash(a)}}}(),function(t){function e(t){var e=0,n=[],i=0;this.n=function(){if(0==i){if(e>=t.length)return null;var r=t.charCodeAt(e++);return r<=127?r:r<=2047?(n[1]=128|63&r,i=1,192|r>>6&31):r>=55296&&r<=57343?null:(n[0]=128|r>>6&63,n[1]=128|63&r,i=2,224|r>>12&15)}return n[n.length-i--]}}function n(t){function e(t){function e(t,e){for(var n=0,i=0;i<s;i++)n=131*n+t[e+i];return n}function n(t){if(u.push(t),u.length>o&&(u.shift(),f.shift()),u.length>=s){var n=u.length-s;f[n]=e(u,n)}}for(var i,r,c,u=[],f=[],l=[],d=0;null!=(i=t.n());)l.push(i);this.n=function(){if(d<l.length-s+1){var t=e(l,d);r=0,c=0;for(var i=0;i<f.length;i++)if(t==f[i]){var o,h;for(o=i,h=d;o<u.length&&h<l.length&&!(u[o]!=l[h]||h-d>=a);o++,h++);o-i>=c&&o-i>=s&&(c=o-i,r=i)}if(0==c){var p=[0,l[d]];return n(l[d++]),p}return d+=c,[c,u.length-(r+c)]}return d<l.length?[0,l[d++]]:null}}function n(t){for(var e,n=[],i=-1;null!=(e=t.n());)if(0==e[0])i!=-1&&255!=n[i]||(n.push(128),i=n.length-1),n.push(e[1]),n[i]++;else{i=-1,n.push(e[0]);var r=e[1];if(r<=127)n.push(r);else{for(var o=[];r>0;)o.push(127&r),r>>=7;for(var a=o.length-1;a>=0;a--)n.push(128|o[a]);n[n.length-1]&=127}}i=0,this.n=function(){return i>=n.length?null:n[i++]}}var i=new n(new e(t));this.n=function(){return i.n()}}function i(t){var e=[],n=0;this.n=function(){if(n>0)return e[4-n--];var i=[t.n(),t.n(),t.n()];return null==i[0]?null:(e[0]=r(i[0]>>2),e[1]=r(null==i[1]?i[0]<<4&63:63&(i[0]<<4|i[1]>>4)),e[2]=null==i[1]?"~":r(null==i[2]?i[1]<<2&63:63&(i[1]<<2|i[2]>>6)),e[3]=null==i[2]?"~":r(63&i[2]),n=3,e[0])}}function r(t){return c.charAt(t)}var o=1024,a=63,s=3,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";t.compress=function(t){for(var r,o=new e(t),a=new n(o),s=new i(a),c=[];null!=(r=s.n());)c[c.length]=r;return c.join("")}}(p),function(){"use strict";function t(t){return t<10?"0"+t:t}function e(t){return a.lastIndex=0,a.test(t)?'"'+t.replace(a,function(t){var e=s[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function n(t,a){var s,c,u,f,l,d=i,h=a[t];switch(h&&"object"==typeof h&&"function"==typeof h.toJSON&&(h=h.toJSON(t)),"function"==typeof o&&(h=o.call(a,t,h)),typeof h){case"string":return e(h);case"number":return isFinite(h)?String(h):"null";case"boolean":case"null":return String(h);case"object":if(!h)return"null";if(i+=r,l=[],"[object Array]"===Object.prototype.toString.apply(h)){for(f=h.length,s=0;s<f;s+=1)l[s]=n(s,h)||"null";return u=0===l.length?"[]":i?"[\n"+i+l.join(",\n"+i)+"\n"+d+"]":"["+l.join(",")+"]",i=d,u}if(o&&"object"==typeof o)for(f=o.length,s=0;s<f;s+=1)"string"==typeof o[s]&&(c=o[s],(u=n(c,h))&&l.push(e(c)+(i?": ":":")+u));else for(c in h)Object.prototype.hasOwnProperty.call(h,c)&&(u=n(c,h))&&l.push(e(c)+(i?": ":":")+u);return u=0===l.length?"{}":i?"{\n"+i+l.join(",\n"+i)+"\n"+d+"}":"{"+l.join(",")+"}",i=d,u}}if("object"==typeof JSON&&"function"==typeof JSON.stringify)return p.JSON={stringify:JSON.stringify},!0;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+"T"+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var i,r,o,a=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};p.JSON={},p.JSON.stringify=function(t,e,a){var s;if(i="",r="","number"==typeof a)for(s=0;s<a;s+=1)r+=" ";else"string"==typeof a&&(r=a);if(o=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return n("",{"":t})}}(),function(){"use strict";if(!(document.visibilityState||document.webkitVisibilityState||document.mozVisibilityState)){document.hidden=!1,document.visibilityState="visible";var e=null,n=function(){document.createEvent?(e||(e=document.createEvent("HTMLEvents"),e.initEvent("visibilitychange",!0,!0)),document.dispatchEvent(e)):"object"==typeof Visibility&&Visibility._onChange.call(Visibility,{})},i=function(){document.hidden=!1,document.visibilityState="visible",n()},r=function(){document.hidden=!0,document.visibilityState="hidden",n()};document.addEventListener?(t.addEventListener("focus",i,!0),t.addEventListener("blur",r,!0)):(document.attachEvent("onfocusin",i),document.attachEvent("onfocusout",r))}}(),function(e){"use strict";var n=function(t){return void 0!=t},i=t.Visibility={onVisible:function(t){if(!i.isSupported()||!i.hidden())return t(),i.isSupported();var e=i.change(function(n,r){i.hidden()||(i.unbind(e),t())});return e},change:function(t){if(!i.isSupported())return!1;i._lastCallback+=1;var e=i._lastCallback;return i._callbacks[e]=t,i._setListener(),e},unbind:function(t){delete i._callbacks[t]},afterPrerendering:function(t){if(!i.isSupported()||"prerender"!=i.state())return t(),i.isSupported();var e=i.change(function(n,r){"prerender"!=r&&(i.unbind(e),t())});return e},hidden:function(){return i._prop("hidden",!1)},state:function(){return i._prop("visibilityState","visible")},isSupported:function(){return n(i._prefix())},_doc:t.document,_prefixes:["webkit","moz"],_chechedPrefix:null,_listening:!1,_lastCallback:-1,_callbacks:{},_hiddenBefore:!1,_init:function(){i._hiddenBefore=i.hidden()},_prefix:function(){if(null!==i._chechedPrefix)return i._chechedPrefix;if(n(i._doc.visibilityState))return i._chechedPrefix="";for(var t,e=0;e<i._prefixes.length;e++)if(t=i._prefixes[e]+"VisibilityState",n(i._doc[t]))return i._chechedPrefix=i._prefixes[e]},_name:function(t){var e=i._prefix();return""==e?t:e+t.substr(0,1).toUpperCase()+t.substr(1)},_prop:function(t,e){return i.isSupported()?i._doc[i._name(t)]:e},_onChange:function(t){var e=i.state();for(var n in i._callbacks)i._callbacks[n].call(i._doc,t,e);i._hiddenBefore=i.hidden()},_setListener:function(){if(!i._listening){var t=i._prefix()+"visibilitychange",e=function(){i._onChange.apply(Visibility,arguments)};i._doc.addEventListener?i._doc.addEventListener(t,e,!1):i._doc.attachEvent(t,e),i._listening=!0,i._hiddenBefore=i.hidden()}}};i._init()}(),p.isIE=/msie/i.test(navigator.userAgent),p.fingerprintGen=function(){"use strict";var e=p.isIE;return{debug:!1,version:"1.1.0",murmur_hash:function(t,e){var n,i,r,o,a,s,c,u;for(n=3&t.length,i=t.length-n,r=e||31,a=3432918353,s=461845907,u=0;u<i;)c=255&t.charCodeAt(u)|(255&t.charCodeAt(++u))<<8|(255&t.charCodeAt(++u))<<16|(255&t.charCodeAt(++u))<<24,++u,c=(65535&c)*a+(((c>>>16)*a&65535)<<16)&4294967295,c=c<<15|c>>>17,c=(65535&c)*s+(((c>>>16)*s&65535)<<16)&4294967295,r^=c,r=r<<13|r>>>19,o=5*(65535&r)+((5*(r>>>16)&65535)<<16)&4294967295,r=27492+(65535&o)+((58964+(o>>>16)&65535)<<16);switch(c=0,n){case 3:c^=(255&t.charCodeAt(u+2))<<16;case 2:c^=(255&t.charCodeAt(u+1))<<8;case 1:c^=255&t.charCodeAt(u),c=(65535&c)*a+(((c>>>16)*a&65535)<<16)&4294967295,c=c<<15|c>>>17,c=(65535&c)*s+(((c>>>16)*s&65535)<<16)&4294967295,r^=c}return r^=t.length,r^=r>>>16,r=2246822507*(65535&r)+((2246822507*(r>>>16)&65535)<<16)&4294967295,r^=r>>>13,r=3266489909*(65535&r)+((3266489909*(r>>>16)&65535)<<16)&4294967295,r^=r>>>16,(r>>>0).toString(36)},trimVersion:function(t){return(t||"").replace(/([0-9.\s]+)/g,"")},trythese:function(){for(var t,e=0,n=arguments.length;e<n;e++){var i=arguments[e];try{t=i();break}catch(r){}}return t},get:function(t,e,n){return t&&t[e]?e+"="+(n?n:t[e]):""},display:function(e){var n=t.screen;return e.push(n.width+"x"+n.height+"|"+n.colorDepth),n.availHeight&&e.push("avail"+n.availWidth+"x"+n.availHeight),n.deviceYDPI&&e.push("DPI"+n.deviceXDPI+"x"+n.deviceYDPI),n.bufferDepth&&e.push("bufferDepth"+n.bufferDepth),n.offscreenBuffering&&e.push("offscreenBuffering"+n.offscreenBuffering),n.logicalXDPI&&e.push("logicalDPI"+n.logicalXDPI+"x"+n.logicalYDPI),n.systemXDPI&&e.push("systemDPI"+n.systemXDPI+"x"+n.systemYDPI),e.push(this.get(n,"orientation",1)),e.push(this.get(n,"pixelDepth")),e.push(this.get(n,"updateInterval")),e.push(this.get(n,"fontSmoothingEnabled",1)),e},timezone:function(t){return t.push("timezone"+(new Date).getTimezoneOffset()),t},connection:function(e){return e.push(this.get(t,"maxConnectionsPerServer")),e.push(this.get(navigator,"hardwareConcurrency")),navigator.connection&&navigator.connection.type&&e.push("conntype"+navigator.connection.type),e},language:function(t){t.push(navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage||"")},storage:function(e){for(var n=["sessionStorage","localStorage","indexedDB","openDatabase"],i=0,r=n.length;i<r;i++)e.push(this.get(t,n[i],1));return e},getIEPlugins:function(t){var e=function(){var t=document.createElement("span");return t.id="clientCaps",t.style.behavior="url('#default#clientcaps')",document.body.appendChild(t),t}();if(e&&e.isComponentInstalled){var n={DS:"{44BBA848-CC51-11CF-AAFA-00AA00B6015C}",DHDB:"{9381D8F2-0288-11D0-9501-00AA00B911A5}",DHDBFJ:"{4F216970-C90C-11D1-B5C7-0000F8051515}",ICW:"{5A8D6EE0-3E18-11D0-821E-444553540000}",IE:"{89820200-ECBD-11CF-8B85-00AA005B4383}",IECFJ:"{08B0E5C0-4FCB-11CF-AAA5-00401C608555}",WMP:"{22D6F312-B0F6-11D0-94AB-0080C74C7E95}",NN:"{44BBA842-CC51-11CF-AAFA-00AA00B6015B}",OBP:"{3AF36230-A269-11D1-B5BF-0000F8051515}",OE:"{44BBA840-CC51-11CF-AAFA-00AA00B6015C}",TS:"{CC2A9BA0-3BDD-11D0-821E-444553540000}",MVM:"{08B0E5C0-4FCB-11CF-AAA5-00401C608500}",DDE:"{44BBA855-CC51-11CF-AAFA-00AA00B6015F}",DOTNET:"{6FAB99D0-BAB8-11D1-994A-00C04F98BBC9}",YHOO:"{E5D12C4E-7B4F-11D3-B5C9-0050045C3C96}",SWDNEW:"{166B1BCA-3F9C-11CF-8075-444553540000}",DOTNETFM:"{89B4C1CD-B018-4511-B0A1-5476DBF70820}",MDFH:"{8EFA4753-7169-4CC3-A28B-0A1643B8A39B}",FLH:"{D27CDB6E-AE6D-11CF-96B8-444553540000}",SW:"{2A202491-F00D-11CF-87CC-0020AFEECF20}",SWD:"{233C1507-6A77-46A4-9443-F871F945D258}",RP:"{CFCDAA03-8BE4-11CF-B84B-0020AFBBCCFA}",QT:"{DE4AF3B0-F4D4-11D3-B41A-0050DA2E6C21}",IEHE:"{DE5AED00-A4BF-11D1-9948-00C04F98BBC9}"};for(var i in n)if(n.hasOwnProperty(i)){var r=n[i];if(e.isComponentInstalled(r,"componentid")){var o=e.getComponentVersion(r,"componentid");t.push(i+":"+o)}}for(var a=["AcroPDF.PDF","Adodb.Stream","AgControl.AgControl","DevalVRXCtrl.DevalVRXCtrl.1","MacromediaFlashPaper.MacromediaFlashPaper","Msxml2.DOMDocument","Msxml2.XMLHTTP","PDF.PdfCtrl","QuickTime.QuickTime","QuickTimeCheckObject.QuickTimeCheck.1","RealPlayer","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","Scripting.Dictionary","SWCtl.SWCtl","Shell.UIHelper","ShockwaveFlash.ShockwaveFlash","Skype.Detection","TDCCtl.TDCCtl","WMPlayer.OCX","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1","{D27CDB6E-AE6D-11CF-96B8-444553540000}"],s=0;s<a.length;s++)try{new ActiveXObject(a[s]),t.push(a[s])}catch(c){}}},agent:function(n){if(n.push(navigator.userAgent),e)this.getIEPlugins(n),n.push(this.get(t,"__IE_DEVTOOLBAR_CONSOLE_COMMAND_LINE",1));else{for(var i=navigator.plugins,r="pls",o=0;o<i.length;o++){var a=i[o];if(r+=a.filename||a.name||o,o>30)break}n.push(r)}return n.push(this.get(navigator,"platform")),"undefined"!=typeof navigator.doNotTrack&&n.push(navigator.doNotTrack||0),n},canvas:function(t){var e=document.createElement("canvas");if("undefined"==typeof e.getContext)t.push("UNSUPPORTED_CANVAS");else{e.width=780,e.height=150;var n="English‰∏≠Êñá’Ä’°’µ’•÷Ä’•’∂ÿßÁπÅÈ´îËº∏ÂÖ•ŸÑÿπÿ±ÿ®Ÿäÿ©“ö–∞–∑–∞“õ—à–∞`~1!2@3#4$5%6^7&8*9(0)-_=+[{]}|;:',<.>/?üòÉ",i=e.getContext("2d");i.save(),i.rect(0,0,10,10),i.rect(2,2,6,6),t.push(i.isPointInPath(5,5,"evenodd")===!1?"yes":"no"),i.restore(),i.save();var r=i.createLinearGradient(0,0,200,0);r.addColorStop(0,"rgb(200,0,0)"),r.addColorStop(.5,"rgb(0,200,0)"),r.addColorStop(1,"rgb(200,0,0)"),i.fillStyle=r,i.fillRect(0,0,200,150),i.restore(),i.save(),i.translate(250,0),i.globalCompositeOperation="multiply",i.fillStyle="rgb(255,0,255)",i.beginPath(),i.arc(50,50,50,0,2*Math.PI,!0),i.closePath(),i.fill(),i.fillStyle="rgb(0,255,255)",i.beginPath(),i.arc(100,50,50,0,2*Math.PI,!0),i.closePath(),i.fill(),i.fillStyle="rgb(255,255,0)",i.beginPath(),i.arc(75,100,50,0,2*Math.PI,!0),i.closePath(),i.fill(),i.fillStyle="rgb(255,0,255)",i.arc(75,75,75,0,2*Math.PI,!0),i.arc(75,75,25,0,2*Math.PI,!0),i.fill("evenodd"),i.restore(),i.save(),i.fillStyle="#360",i.font="13px 'sans'",i.textBaseLine="top",i.fillText(n,5,18),i.fillStyle="#360",i.font="14px 'Microsoft Yahei'",i.textBaseLine="top",i.fillText(n,5,31),i.fillStyle="#360",i.font="15px 'Consolas'",i.textBaseLine="top",i.fillText(n,5,44),i.fillStyle="#360",i.font="9px 'Arial'",i.textBaseLine="top",i.fillText(n,5,56),i.fillStyle="#360",i.font="10px 'Verdana'",i.textBaseLine="top",i.fillText(n,5,69),i.fillStyle="#360",i.font="11px 'Webdings'",i.textBaseLine="top",i.fillText(n,5,80),i.restore(),i.save(),i.beginPath(),i.strokeStyle="blue",i.lineWidth=5,i.shadowOffsetX=2,i.shadowOffsetY=2,i.shadowColor="rgb(85,85,85)",i.shadowBlur=3,i.arc(500,15,10,0,2*Math.PI,!0),i.stroke(),i.closePath(),i.restore(),t.push(e.toDataURL())}return t},getCpuClass:function(t){return t.push(navigator.cpuClass||""),t},run:function(){var t=[],e=[],n=[],i=[];try{this.display(e),this.timezone(e),this.connection(e),this.language(e)}catch(r){}try{this.storage(n),this.agent(n)}catch(r){}try{this.canvas(i),this.getCpuClass(i)}catch(r){}return t.push(this.murmur_hash(e.join(""))),t.push(this.murmur_hash(n.join(""))),t.push(this.murmur_hash(i.join(""))),t.join("-")}}.run()};var _,C={},S={_env:/((test[a-z]?|dev|uat|ui|local)\.sh\.(ctrip|huixuan)travel)|(qa\.nt\.ctripcorp)/i,_bfa:/^\d.+(\.\d+){2,}$/,_bfs:/^\d+\.\d+$/,_var:/\$\{(\w+)\}/g},k=function(t){this.isPVSend=!1,this.isPSSend=!1,this.isEventInit=!1,this.enterTime=p.now(),this.commonData=[],this.pid=0,this.eSkip=0,this.options=t||{},this.envInit_(),this.init()};k.prototype={constructor:k,_QUEUE:[],init:function(){this.isPVSend=!1,this.bfa=null,this.bfs=null,this.bfi=null,this._isNewVisitor=0,this._isNewSession=0,this.isLogin=0,this.readBfa(),this.sessRead(),this.readBfi(),i(p.CFG.domain)},envInit_:function(){var t=h.hostname;"test"==p.ENV||S._env.test(t)?p.CFG.surl=p.PROTOCOL+"//ubt.uat.qa.nt.ctripcorp.com/":"offline"==p.ENV&&(p.CFG.surl=p.PROTOCOL+"//ubt.sh.ctriptravel.com/");var e=this.domainInit(t);e&&(p.CFG.domain=e)},inputInit:function(){try{var t={},e=this;if(document.body.innerHTML.replace(/\bbf_ubt_([^ '"]*)/gi,function(n,i){var r=p.$v(n);if(r){var o=i.split("_");o[0]&&"tl"==o[0]?("offline"==p.ENV?"callid"==o[1]&&e.sendData({k:"pvctm",v:'{"callid":"'+r+'"}'}):e._setPVCustom(o[1],r),t[o[1]]=r):(t[o[0]]=r,e.set_(o[0].toLowerCase(),r))}}),"offline"==p.ENV&&t.eid){var n={k:"offline_order",v:'{"uid":"'+(t.uid||"")+'","orderid":"'+(t.orderid||"")+'","callid":"'+t.callid+'","eid":"'+t.eid+'","pid":${page_id},"order_type":"'+(t.ordertype||"")+'"}'};e.sendData(n)}}catch(i){}},domainInit:function(t){return n()},uniqueId_:function(){return p.getRand()^2147483647&p.CLI.getHash()},plus_:function(t){return parseInt(t,10)+1},setItem:function(t,e,n){if(!p.isSupportCookie)return!1;p.setCookie(t,e,n)},getItem:function(t,e,n){return p.isSupportCookie?p.getCookie(t,e,!0):""},readBfa:function(){var t=this.getItem("_bfa","",!0);if(t&&S._bfa.test(t)){var e=t.split(".");e.length>6&&(this.bfa=e)}if(!this.bfa){var n=this.enterTime;this.bfa=[1,n,this.uniqueId_().toString(36),1,n,n,0,0],this._isNewVisitor=1}},sessRead:function(){var t=this.getItem("_bfs","",!0);!this._isNewVisitor&&t&&S._bfs.test(t)?(this.bfs=t.split("."),this.bfs[1]=this.plus_(this.bfs[1]),this.bfa[7]=this.plus_(this.bfa[7])):(this._isNewSession=1,this.bfs=[1,1],this.bfa[4]=this.bfa[5],this.bfa[5]=this.enterTime,this.bfa[6]=this.plus_(this.bfa[6]),this.bfa[7]=this.plus_(this.bfa[7])),this.sessWrite()},sessWrite:function(){this.setItem("_bfa",this.bfa.join("."),63072e6),this.setItem("_bfs",this.bfs.join("."),18e5)},readBfi:function(){var t,e,n,i={};if(e=this.getItem("_bfi","",!0)){t=e.split("&")||[];for(var r=0;r<t.length;r++)n=t[r].split("="),n.length>1&&(i[n[0]]=n[1])}this.ppi=i&&i.p1?i.p1:0,this.ppv=i&&i.v1?i.v1:0,this.bfi=i},updateBfi:function(){if(this.isPVSend){var t=this.get_("pvid"),e="p1="+this.pid+"&p2="+this.ppi+"&v1="+t+"&v2="+this.ppv;this.setItem("_bfi",e)}},_set:function(t,e,n){switch(n=n||m,t){case"uid":this.options.duid=e;break;case"loginName":this.options.login_uid=e;break;default:return n(0)}return n(e)},get_:function(t){if(this.bfa){var e=this.bfa;switch(t){case"vid":return e[1]+"."+e[2];case"sid":return parseInt(e[6],10)||0;case"pvid":return parseInt(e[7],10)||0;case"fullpv":return e[1]+"."+e[2]+"."+e[6]+"."+e[7];default:return""}}},set_:function(t,e){switch(t){case"domain":this._setDomain(e);break;case"clickv1":this._setClickV1(e);break;case"collect":this._delCollect(e);break;case"referrer":this._setReferrer(e);break;case"orderid":this._setOrderID(e)}},getPid:function(t){return this.pid&&!t||(this.pid=parseInt(p.$v("page_id"),10)||0),this.pid},formatABtestValue:function(t){return/;$/.test(t)||(t+=";"),t},getABtest:function(){if(this.d_abtest)return this.d_abtest;for(var t=p.$("ab_testing_tracker"),e=[],n="";t;)n+=this.formatABtestValue(t.value),e.push(t),t.removeAttribute("id"),t.removeAttribute("name"),t=p.$("ab_testing_tracker");for(var i=0;i<e.length;i++)e[i].setAttribute("id","ab_testing_tracker");try{var r="";(r=document.location.hash)&&r.indexOf("abtest=")!==-1&&(n+=this.formatABtestValue(decodeURIComponent(r.replace(/.*(abtest=)/i,"").replace(/#.*/i,""))))}catch(o){}return this.d_abtest=n.substring(0,280),this.d_abtest},getPVparams:function(){var t=p.getCookieObj("Session"),e=p.getCookieObj("CtripUserInfo"),n=p.getCookieObj("StartCity_Pkg"),i=p.getCookieObj("Union"),r={engine:t&&t.SmartLinkCode?t.SmartLinkCode:"",keyword:t&&t.SmartLinkQuary?t.SmartLinkQuary:"",start_city:n&&n.PkgStartCity?n.PkgStartCity:"",alliance_id:i&&i.AllianceID?i.AllianceID:"",alliance_sid:i&&i.SID?i.SID:"",alliance_ouid:i&&i.OUID?i.OUID:"",user_grade:e&&e.VipGrade?e.VipGrade:"",duid:e&&e.U?e.U:"",zdata:p.get("zdatactrip",{w:"cookie",v:""}),callid:p.get("bf_ubt_tl_callid",{w:"input",v:""})};"string"==typeof this.options.duid&&(r.duid="custom:"+this.options.duid.substring(0,50)),"string"==typeof this.options.login_uid&&(r.login_uid=this.options.login_uid.substring(0,50));try{if(!r.alliance_id&&!r.alliance_sid&&p.isSupportStorage&&(i=localStorage.getItem("UNION"))){var o=JSON.parse(i);if((i=o.data)&&(o.st||o.timeout)){var a=0;a=o.st?new Date(o.st):new Date(o.timeout.replace(/-/g,"/")),a&&a>=p.now()&&(r.alliance_id=i.AllianceID||i.ALLIANCEID||"",r.alliance_sid=i.SID||"",r.alliance_ouid=i.OUID||"")}}}catch(s){}return r.duid&&(this.isLogin=1),this.d_pvparams=r,r},getCommon:function(t){return(t||this.commonData.length<4)&&(this.commonData=[this.getPid(),this.get_("vid"),this.get_("sid"),this.get_("pvid"),p.get("CorrelationId",{w:"input",v:""}),this.getABtest()||"",p.get("bf_ubt_offline_mid",{w:"input",v:""}),"2.6.5",p.fingerprint]),this.commonData},getOinfo:function(){var e=!1;return t.outerHeight-t.innerHeight>160&&(e=!0),t.outerWidth-t.innerWidth>160&&(e=!0),p.JSON.stringify({tz:-(new Date).getTimezoneOffset(),dt:e,rg:p.get("_RSG",{w:"cookie",v:"",l:32})})},getUinfo:function(){var e=this.getPVparams(),n=[],i="";try{i+="cl="+document.cookie.length,i+=",ckl="+(document.cookie.match(/[^=]+=[^;]*;?/g)||[]).length}catch(r){}return n[0]=13,n[1]=parseInt(this.ppi,10)||0,n[2]=parseInt(this.ppv,10)||0,n[3]=String(p.CFG.href).substring(0,600),n[4]=p.CLI.s.width,n[5]=p.CLI.s.height,n[6]=i,n[7]=p.CLI.l,n[8]=e.engine,n[9]=e.keyword,n[10]=p.CLI.getRefer(),n[11]=this.getABtest(),n[12]=this._isNewVisitor,n[13]=this.isLogin,n[14]=e.login_uid||p.get("login_uid",{w:"cookie",v:""}),n[15]=e.user_grade,n[16]=p.get("corpid",{w:"cookie",v:""}),n[17]=e.start_city,n[18]=e.alliance_id,n[19]=e.alliance_sid,n[20]=e.alliance_ouid,n[21]=p.CFG.orderID,n[22]=e.duid,n[23]=e.zdata,n[24]=e.callid,n[25]=p.get("bid",{w:"cookie",v:""}),n[26]="",n[27]="",n[28]="",n[29]="online",n[30]=t.devicePixelRatio||1,n[31]=this._isNewSession,n[32]=this.getOinfo(),n[33]=p.get("bf_ubt_product",{w:"input",v:"",l:30}),n[34]="",n[35]=p.CLI.rid,n},replaceParam:function(t){var e=this.getPVparams(),n={duid:e.duid,page_id:this.getPid(),is_login:this.isLogin};return t.replace(S._var,function(t,e){return e in n?n[e]:t})},dataHandler:function(t){if("string"==typeof t)return t;if("object"==typeof t){if(t.c&&t.d){var e={c:this.getCommon(),d:t.d};return"ac=g&d="+p.encode(p.JSON.stringify(e))}if(t.k&&t.v){var n=this.getPVparams(),i=p.encode(this.replaceParam(t.v));return"ac=tl&pi="+this.getPid()+"&key="+t.k+"&val="+i+"&pv="+this.get_("fullpv")+"&duid="+n.duid+"&env=online&v=6"}}return!1},sendData:function(t){if(this.isPVSend){var e=this.dataHandler(t);e&&p.send(e,t.callback||m)}else this._QUEUE.push(t)},sendPV:function(t){var e=this;if(this.isPVSend)return!0;try{var n={c:this.getCommon(!0),d:{uinfo:this.getUinfo()}},i="ac=g&d="+p.encode(p.JSON.stringify(n));p.send(i,function(n){n&&(e.isPVSend=!0,e.queueSend_()),p.isFunction(t)&&t(n)})}catch(r){r.message||r.description||"&line:"+name.lineNumber||name.line}},queueSend_:function(){this.updateBfi();var t=this._QUEUE,e=t.length;if(e){for(var n=0;n<e;n++){var i=t[n],r=this.dataHandler(i);r&&p.send(r,i.callback||m)}this._QUEUE=[]}return p.PVCTM&&this.sendData({k:"pvctm",v:p.JSON.stringify(p.PVCTM)}),!0},getPS:function(){for(var t=["navigationStart","redirectStart","unloadEventStart","unloadEventEnd","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd"],e=l.performance.timing,n=[6],i=0;i<t.length;i++)n.push(e[t[i]]);return n.push(l.performance.navigation.type||0),n.push(l.performance.navigation.redirectCount||0),n},sendPS:function(){if(!(p.CFG.dCollect.performance||!l.performance||this.getPid()<0)){var t=0,e=this;!function(){if(l.performance.timing.loadEventEnd&&!this.isPSSend){var n={c:e.getCommon(),d:{ps:e.getPS()}},i="ac=g&d="+p.encode(p.JSON.stringify(n));p.send(i),e.isPSSend=!0}else t<300&&(t++,setTimeout(arguments.callee,300))}()}},bindSend:function(t){var e=this;if(this.isEventInit)return!0;if(this.isEventInit=!0,this.inputInit(),this.sendPV(t),Visibility.change(function(t,n){"visible"==n&&e.updateBfi()}),this.sendPS(),p.isArray(b.pid))for(var n=0;n<b.pid.length;n++)b.pid[n](!1,this.getPid())},getCommonObj:function(){var t=this.getCommon();return{pid:t[0],vid:t[1],sid:t[2],pvid:t[3],ver:"2.6.5",ifr:0}},pack:function(t,e){if("restiming"!==e)return!1;var t=[[1,"ctrip"],this.getCommonObj(),[[["ubt",e,1],t]]],n="a=z&d="+p.compress(p.JSON.stringify(t))+"&t="+p.now();p.send(n)},_asynRefresh:function(t,e){if("object"==typeof t){if("undefined"!=typeof t.page_id&&(this.pid=parseInt(t.page_id,10)||0),"undefined"!=typeof t.url&&p.contains(t.url,"http")&&(p.CFG.href=t.url),"undefined"!=typeof t.orderid)this._setOrderID(t.orderid,!0);else{var n=p.$v("bf_ubt_orderid");n&&this._setOrderID(n,!0)}t.refer&&this._setReferrer(t.refer),"string"==typeof t.uid&&(this.options.duid=t.uid),"string"==typeof t.loginName&&(this.options.login_uid=t.loginName)}this.isEventInit?(this.init(),this.sendPV(e)):this.bindSend(e)},_setEnv:function(t){p.ENV=t||"online",this.envInit_()},_setDebug:function(t){p.CFG.debug=!!t},_setDomain:function(t){p.CFG.domain=t},_setClickV1:function(t){p.CFG.cv1=t||""},_delCollect:function(t){},_setReferrer:function(t){p.CFG.referrer=t},_setOrderID:function(t,e){!t||p.CFG.orderID&&!e||(p.CFG.orderID=t)},_setPVCustom:function(t,e){p.PVCTM?p.PVCTM[t]=e:(p.PVCTM={},p.PVCTM[t]=e)},_getFullPV:function(t){var e=this.get_("fullpv");return t&&p.isFunction(t)&&t(e),e},_getStatus:function(t){var e={vid:this.get_("vid"),sid:this.get_("sid"),pvid:this.get_("pvid"),pid:this.getPid(),abtest:this.getABtest(),pv:this.isPVSend,ps:this.isPSSend}
;return t&&p.isFunction(t)&&t(e),e},_getFP:function(t,e){return t&&p.isFunction(t)?(e?c(t):t(p.fingerprint),1):0},_getPageid:function(t){this.isEventInit?t(!1,this.getPid()):(b.pid||(b.pid=[]),b.pid.push(t))},_tracklog:function(t,e,n){if("string"!=typeof e||e.length<1)return n("value must be a string."),!1;this.sendData({k:t,v:e,callback:n||!1})},_trackError:function(t,e){if("object"!=p.type(t))return!1;if(this.eSkip&&"undefined"==typeof t.skip)return this.eSkip=!1,!1;t.skip===!0&&(this.eSkip=!0);for(var n=["version","message","line","file","category","framework","time","repeat","islogin","name","column"],i=[7,"",0,"","","",p.now()-this.enterTime,1,this.isLogin,"",0],r=1,o=n.length;r<o;r++){var a=n[r];if(t[a]){var s=t[a]+"";switch(a){case"message":case"file":s=s.substring(0,500);break;case"category":case"framework":case"name":s=s.substring(0,100);break;case"time":s=parseInt(s,10);break;case"column":s=parseInt(s,10);break;default:s=parseInt(s,10)||0}i[r]=s}}var c="";t.stack?c=t.stack:"undefined"!=typeof cQuery&&p.isFunction(cQuery.trace)&&(c=cQuery.trace(),p.isArray(c)&&(c=c.join(""))),c=c.slice(i.join("").length-2e3),i.push(c),this.sendData({c:!0,d:{error:i},callback:e||!1})},_trackUserBlock:function(t,e){if("object"!=typeof t)return!1;var n=[];n[0]=6,n[1]=this.isLogin,n[2]=String(t.message||"").substring(0,300),n[3]=String(t.value||"").substring(0,300),n[4]=String(t.type||"").substring(0,50),n[5]=String(t.dom||"").substring(0,100),n[6]=String(t.form||"").substring(0,100),n[7]=parseInt(t.count||0,10)||0,this.sendData({c:!0,d:{ub:n},callback:e||!1})},_trackMatrix:function(t,e,n,i,r){var i="number"==typeof i?i:p.now(),o=0;if("string"==typeof t&&"object"==typeof e&&"number"==typeof n&&1==(o=f(e))){var a={name:t,tags:e,value:n,ts:i},s=[[1,"matrix"],this.getCommon(),[a]],c="ac=a&d="+p.compress(p.JSON.stringify(s));p.send(c),o=1}p.isFunction(r)&&r(o)},_trackMetric:function(t){var e=0;if("object"==typeof t){var n=p.extend({name:"",tag:!1,value:0,callback:m,sample:100},t),i=_.get_("vid");if(i&&!(p.hash(i)%100>1*n.sample)&&"string"==typeof n.name&&"object"==typeof n.tag&&"number"==typeof n.value){if(1==(e=f(n.tag))){var r={name:n.name,tags:n.tag,value:n.value,ts:p.now()||0},o=[[1,"matrix"],this.getCommon(),[r]],a="ac=a&d="+p.compress(p.JSON.stringify(o));p.send(a),e=1}p.isFunction(n.callback)&&n.callback(e)}}},_trackKeyboard:function(t,e,n){p.keyCollector(t,e,n)},track:function(t,e){var n=this.getCommon(),e={c:{pid:n[0],vid:n[1],sid:n[2],pvid:n[3],tid:n[4],abtest:n[5],offline_mid:n[6],UBT_version:n[7],bf:n[8],agent:""},dataType:t,priority:0,d:[e]},i="ac=f&d="+p.encode(p.JSON.stringify(e));p.send(i)}},p.renderAPI=function(){function e(){if(!f){if(p._union_){if("wait"!=p.$v("page_id")){if(0!=_.getPid())return f=!0,_.bindSend();if("complete"===document.readyState)return f=!0,_.bindSend();var n=!1;try{n=null==t.frameElement&&document.documentElement}catch(i){}if(n&&n.doScroll)try{return n.doScroll("left"),f=!0,_.bindSend()}catch(i){}}u=1}if(u>5&&(p._union_=!0),u>40)return _.bindSend();u++,setTimeout(e,500)}}var n=function(){this.push=function(t){for(var e=arguments,n=0,i=e.length,r=0;r<i;r++)try{if("function"==typeof e[r])e[r]();else{var o=e[r][0];if("_"==o.substring(0,1))return _[o].apply(_,e[r].slice(1)),1}}catch(a){n++}return n}},i=new n,r=alert,o=0;!function(){try{l.alert=function(t){o++,i.push(["_trackUserBlock",{message:t,value:"alert",type:"function.alert",dom:"",form:"",count:o}]),r(t)}}catch(t){}}();var a=l.__bfi;if(a&&p.isArray(a))for(var s=l.__bfi.length,c=0;c<s;c++)i.push(l.__bfi[c]);else l.__bfi=[];l.__bfi.push=i.push,l.$_bf._getFullPV=function(){return _.get_("fullpv")},l.$_bf.tracklog=function(t,e,n){_._tracklog(t,e,n)},l.$_bf.trackError=function(t,e){_._trackError(t,e)},l.$_bf._getStatus=function(){return _._getStatus()},l.$_bf.asynRefresh=function(t,e){_._asynRefresh(t,e)};var u=1,f=!1;if(e(),p.on(l,"beforeunload",function(){_.bindSend()}),"null"==p.type(t.onerror)){var d={};t.onerror=function(){if("undefined"!=typeof cQuery&&cQuery.config&&cQuery.config("allowDebug"));else try{var t=arguments,e={message:""+t[0],file:""+t[1],line:t[2],category:"inner-error",framework:"normal",time:p.now()-_.enterTime,repeat:1},n=e.message+e.file+e.line;d[n]||(_._trackError(e),d[n]=!0)}catch(i){}}}},function(){function e(e){e=e||t.event;var n,i=e.target||e.srcElement,a=i.id||i.name,s=e.keyCode;(n=r[a].filter)&&(s=n(e));var c=[o[e.type]||9,s,p.now()-r[a].ts];r[a].data.push(c.join(","))}function n(t){r[key].ts=p.now(),p.on(t,"keydown",e,!0),p.on(t,"keyup",e,!0)}function i(t){p.off(t,"keydown",e,!0),p.off(t,"keyup",e,!0)}var r={},o={keydown:1,keyup:2,keypress:3},a={text:!0,password:!0},s=function(t,e,o){(t="string"==typeof t?document.getElementById(t):t)&&1==t.nodeType&&a[t.type]&&(key=t.id||t.name,key&&(r[key]={ts:0,info:[1,0,0,1,key],data:[],fn:e||p.noop,filter:o},p.on(t,"focus",function(e){n(t,key)}),p.on(t,"blur",function(){i(t,key),s.send(key)})))};s.send=function(t){r[t].info[1]=r[t].ts;var e=r[t].info.join(",")+"|"+r[t].data.join("|");__bfi.push(["_tracklog","ubt_tl_keycollect",e]),r[t].fn(e),r[t].data=[]},p.keyCollector=s}(),p.userAction=function(){function e(t,e){var n=null;return function(){var i=this,r=arguments;clearTimeout(n),n=setTimeout(function(){t.apply(i,r)},e)}}function n(){this._queue=[],this._init()}if(!p.ishttps&&"undefined"!=typeof JSON&&"function"==typeof JSON.stringify&&t.performance&&t.top==t.self){var i=_.get_("vid");if(!i||p.hash(i)%100>10)return!1;var r=document.documentElement;n.prototype={constructor:n,_init:function(){var n=this;p.on(t,"resize",e(function(t){n.collectViewport(t)},500)),p.on(document,"click",function(t){n.collectClick(t)},!0),this.collectViewport()},_sendData:function(t){if(p.CFG.debug)var e="http://localhost/bf.gif?ac=a&d=";else var e=p.CFG.surl+"bf.gif?ac=a&d=";e+=p.compress(t)+"&jv=1.0.0";var n=new Image;n.onload=function(){n=n.onload=null},n.src=e},_getTagIndex:function(t){var e=0;if(t.parentNode)for(var n=t.parentNode.firstChild;n&&n!=t;)1==n.nodeType&&n.tagName==t.tagName&&e++,n=n.nextSibling;return e>0?"["+ ++e+"]":""},_getXpath:function(t){for(var e,n=[],i=0;t&&9!=t.nodeType;){var r=t.nodeName+this._getTagIndex(t)+(t.id?"[@id='"+t.id+"']":"");(e=t.getAttribute("block"))&&(r+="[@block='"+e+"']"),n[i++]=r,t=t.parentNode}return n.reverse().join("/")},_push:function(t,e,n){var i={action:t,xpath:e,ts:n||+new Date};this._queue.push(i),this._checkSend()},_checkSend:function(t){if(t||this._queue.length>5){var e=[[1,"useraction"],[_.pid,_.get_("vid"),_.get_("sid"),_.get_("pvid")],this._queue];this._sendData(JSON.stringify(e)),this._queue=[]}},_getFocus:function(){var t=document.activeElement;return t&&(t.type||t.href||~t.tabIndex)?t:null},collectViewport:function(t){var e=r.clientWidth||document.body.clientWidth,n=r.clientHeight||document.body.clientHeight,i="[@w='"+e+"'][h='"+n+"']";this._push("viewport","HTML/BODY"+i)},collectScroll:function(t){var e=Math.max(r.scrollLeft,document.body.scrollLeft),n=Math.max(r.scrollTop,document.body.scrollTop),i="[@x='"+e+"'][@y='"+n+"']";this._push("scroll","HTML/BODY"+i)},collectClick:function(t){var e=t.target||t.srcElement,n=e.nodeName.toUpperCase();if(e.getBoundingClientRect){var i=e.getBoundingClientRect(),o="",a=Math.max(r.scrollLeft,document.body.scrollLeft)||0,s=Math.max(r.scrollTop,document.body.scrollTop)||0,c=t.pageX||t.clientX+a||0,u=t.pageY||t.clientY+s||0,f=parseInt((r.clientWidth||document.body.clientWidth)/2,10)||0,l=0,d=0;"SELECT"==n&&u-i.top-s<0?(l=c,d=u-s,o+="[@x='"+parseInt(c+i.left+a-f,10)+"'][@y='"+parseInt(u+i.top,10)+"']",o+="[@rx='"+l+"']",o+="[@ry='"+d+"']"):(l=parseInt(c-i.left-a,10),d=parseInt(u-i.top-s,10),o+="[@x='"+(c-f)+"'][@y='"+u+"']",o+="[@rx='"+l+"']",o+="[@ry='"+d+"']"),l>0&&d>0&&this._push("click",this._getXpath(e)+o)}}};var o=new n;p.on(l,"beforeunload",function(){o._checkSend(!0)})}},p.restiming=function(){function e(t){if("string"!=typeof t)return"";for(var e=o.exec(t),n={},i=14;i--;)e[i]&&(n[a[i]]=e[i]);return n}function n(t){return 0==t.connectStart||t.connectEnd-t.connectStart<6||t.responseEnd-t.responseStart<6||t.domainLookupStart==t.domainLookupEnd&&t.domainLookupEnd==t.fetchStart&&t.fetchStart==t.connectStart&&t.fetchStart==t.connectEnd}var i=_.get_("vid");if(i&&!(p.hash(i)%100<90&&(new Date).getTimezoneOffset()==-480))try{if("performance"in t&&"getEntriesByType"in t.performance&&t.performance.getEntriesByType("resource")instanceof Array){var r={"download.ctrip.com":!0,"images4.c-ctrip.com":!0,"webresource.c-ctrip.com":!0,"dimg04.c-ctrip.com":!0,"dimg02.c-ctrip.com":!0,"youresource.c-ctrip.com":!0,"ubt2.test.sh.ctriptravel.com":!0},o=/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,a=["source","scheme","authority","userInfo","user","pass","host","port","relative","path","directory","file","query","fragment"];p.on(t,"load",function(){for(var i=t.performance.getEntriesByType("resource"),o=i.length,a=[],s=0;s<o;s++){var c=i[s],u=e(c.name);if("string"==typeof u.host&&r[u.host]&&!n(c)){var f=c.name;if(a.push({entryType:c.entryType||"",initiatorType:c.initiatorType||"",name:f,nextHopProtocol:"",startTime:c.startTime||0,redirectStart:c.redirectStart||0,redirectEnd:c.redirectEnd||0,fetchStart:c.fetchStart||0,domainLookupStart:c.domainLookupStart||0,domainLookupEnd:c.domainLookupEnd||0,connectStart:c.connectStart||0,connectEnd:c.connectEnd||0,secureConnectionStart:c.secureConnectionStart||0,requestStart:c.requestStart||0,responseStart:c.responseStart||0,responseEnd:c.responseEnd||0,transferSize:c.transferSize||0,encodedBodySize:c.encodedBodySize||0,decodedBodySize:c.decodedBodySize||0}),a.length>2)break}}a.length>0&&_.pack(a,"restiming")})}}catch(s){}};var E=1,D=null,I=function(){if(!document.body&&E<10&&(E+=1,D=setTimeout(I,50)),null!==D&&clearTimeout(D),p.fingerprint=p.fingerprintGen(),_=new k,p.restiming(),p.userAction(),p.renderAPI(),p.CFG.third_modules&&p.CFG.third_modules.length)for(var t,e=0,n=p.CFG.third_modules.length;e<n;e++)t=p.CFG.third_modules[e],t.shouldLoad()&&p.loadScript(t.src,t.option)};I()}catch(A){}}(window);