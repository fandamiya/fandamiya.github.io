var RMS=RMS?RMS:function(){function t(){for(var t=[],e=0;e<i.length;e++)t.push(i[e].join("_"));return t.join("-")}function e(t,e){if(t&&e)for(var n=0,i=t.length;i>n;n++)if(t[n]==e)return n;return-1}function n(t){var e,n=new Array;return n[0]=t>>>24>>>0,n[1]=t<<8>>>24>>>0,n[2]=t<<16>>>24,n[3]=t<<24>>>24,e=String(n[0])+"."+String(n[1])+"."+String(n[2])+"."+String(n[3])}var i=[[0,0,0]],r=function(t,n){if(!n&&t)try{for(var r=t.split("|"),o=[],a=1,c=r.length;c>a;a++)if(r[a].indexOf("__kc__")>0){var s=r[a].split(","),u=s[1].substr(8);e(o,u)<0&&o.push(u),s.length>=3&&(i.push([s[0],s[1].substr(6,1)+e(o,u),s[2]]),i.length>20&&i.shift())}}catch(d){}},o=function(t){try{t.ctrlKey&&67==t.keyCode&&(i[0][0]=1),t.ctrlKey&&86==t.keyCode&&(i[0][1]=1),t.ctrlKey&&88==t.keyCode&&(i[0][2]=1);var e=parseInt((t.altKey?"1":"0")+(t.shiftKey?"1":"0")+(t.ctrlKey?"1":"0")+(8==t.keyCode?"1":"0"),2).toString(16);return"__kc__"+e+"_"+t.keyCode}catch(t){return"error!"}},a=!1;return{init:function(t){if(!a){a=!0,t=t?t:{};var e=(new Date,this);if(window.__bfi=window.__bfi||[],window.__bfi.push(["_getFP",function(t){e.fp=t},!1]),window.__bfi.push(["_getStatus",function(t){e.vid=t.vid},!1]),window.__bfi.push(["_getPageid",function(n,i){!n&&i&&(t.pageId||(t.pageId=i+"")),e.pageId=i}]),window.__bfi.push(["_trackKeyboard","txtContactMobilePhone",r,o]),window.__bfi.push(["_trackKeyboard","J_mobile",r,o]),window&&window.location){var n=!0,i=/^https?:\/\/((ct\.ctrip\.com)|([0-9a-zA-Z\.]*ctripcorp\.))/,c=i.exec(window.location);n=!c,n||(i=/^https?:\/\/(([0-9a-zA-Z\.]*qa\.nt\.ctripcorp\.))/,c=i.exec(window.location),n=c),n&&!function(){var t="//webresource.c-ctrip.com/resaresonline/risk/ubtrms/d.min.839a85d5.js",e=10;setTimeout(function(){var e=document.createElement("script");e.type="text/javascript",e.id="rmsd__script",e.async=!0,e.src=("https:"==document.location.protocol?"https:":"http:")+t;var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)},e),window.rmsd__startScriptLoad=1*new Date}()}var s=function(){var t=window.__rmsbfi||[],e=t.push=function(){for(var t=arguments,e=0,n=t.length,i=0;n>i;i++)try{if("function"==typeof t[i])t[i]();else if("[object Array]"===Object.prototype.toString.call(t[i])){if(2!=t[i].length)continue;var r=t[i][0],o=t[i][1];"string"==typeof r&&"_getRmsToken"===r&&"function"==typeof o&&o(RMS.getRmsToken())}}catch(a){e++}return e};for(window.__rmsbfi=t;t.length>0;)e(t.shift())};s()}},getRmsToken:function(){var e="fp="+(this.fp?this.fp:"");e+="&vid="+(this.vid?this.vid:""),e+="&pageId="+(this.pageId?this.pageId:"");var i=/\_RGUID=([a-z0-9\-]+)(;|$)/.exec(document.cookie),r=/guid\_\_=([a-z0-9\-]+)(;|$)/.exec(document.cookie);if(i&&i.length>1){var o=i[1].replace(/\-/g,"");e+="&r="+o}else if(r&&r.length>1){var o=r[1].replace(/\-/g,"");e+="&r="+o}else e+="&r="+window.CHLOROFP_STATUS;var a=window.CHLOROFP_IP;if(!a){var c=/\_RF1=([0-9\.]+)(;|$)/.exec(document.cookie);c&&c.length>1&&(a=c[1])}isNaN(Number(a))||(a=n(Number(a))),a&&(a=a.replace(/^\s+|\s+$/g,"")),e+="&ip="+a,e+="&kpData="+t(),e+="&screen="+screen.width+"x"+screen.height;var s=(new Date).getTimezoneOffset()/60;e+="&tz="+(0>s?"+":"-")+Math.abs(s),e+="&blang="+navigator.language||navigator.userLanguage,e+="&oslang="+navigator.language||navigator.systemLanguage,e+="&ua="+encodeURIComponent(navigator.userAgent);var u=/^https?:\/\/([a-zA-Z0-9.\-_]+)\/?/,d=u.exec(window.location);if(d&&d.length>1){var f=d[1];e+="&d="+encodeURIComponent(f)}return e+="&v=20",this.uuid&&(e+="&rmsId="+this.uuid),e}}}();RMS.init();
//# sourceMappingURL=rms.js.588e8c69.map