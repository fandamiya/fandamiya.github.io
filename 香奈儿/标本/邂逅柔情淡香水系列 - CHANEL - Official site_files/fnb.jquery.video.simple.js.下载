!function(t,e){"use strict";function i(e){t(".fnb_table_cell").each(function(){var i=t(this);i.height(e?i.height():"")})}function s(t){var e=t.split(":"),i=0;return i+=60*parseInt(e[0],10),i+=parseInt(e[1],10)}function n(i,n){this.element=t(i),this.settings=t.extend({},t.fn[l].defaults,n),this.player=this._getPlayer(),this.poster=this._getPoster(),this.id=this._getID(),this.lng=this._cookieLng("hp_lang"),this.canResize=!0,this.coop=null,this.title=this.element.data("title");var o=this.settings.video||this.player.data("video")||[];this.element.css("height",this.getDimension().height),this.settings.shoppable&&o.length&&(this.chapters={},this.chaptersElements=t(["#",o," .",t.fn[l].className.slideVideo,"[data-chapter]"].join("")),this.chaptersElementsByTime={},this.chaptersElements.each(e.bind(function(e,i){var n=t(i);void 0==this.chapters[o]&&(this.chapters[o]={}),n.hasClass(t.fn[l].className.productType)?this.chapters[o][n.data("chapter")]={type:"product",value:{src:n.data("video-src"),desc:n.data("video-text"),link:n.data("video-link")}}:this.chapters[o][n.data("chapter")]={type:"chapter",value:n.data("video-text")},this.chaptersElementsByTime[s(n.data("chapter"))]=n},this)),this.OOEvent_chapterChanged(0)),t.isArray(o)||(o=[o]);var a=this.lng;null==a&&(a=window.location.href.split("/")[3]),this.OOConfig={rootelement:this.id,video:o,autoplay:c?"1":"0",cl:a,fk:"html5-priority",sp:c?"1":"0",ll:"0",cls:c?"1":"0",lw:this.settings.IMGURL+"throbber.gif",de:"0",dc:"0",df:this.settings.shoppable?"0":"1",dp:"0",dpf:"0",purl:this.poster.attr("src"),sbsn:"no",sbm:"no",cfs:!1,eventfct:e.bind(function(e,i){void 0!==i[0]&&t(".fnb_gift-video").is(":visible")&&parseInt(this.player.data("options").textdelay)<i[0]?t(".fnb_gift-video").hide():void 0===i[0]&&t(".fnb_gift-video").is(":hidden")&&t(".fnb_gift-video").show(),"playerCreated"==e&&t(document).trigger("playerCreated",i[0]),this.element.trigger("fnb.video."+e+".webtrends",i),"OOEvent_"+e in this?this["OOEvent_"+e].apply(this,i):(/%/.test(e)||i[0]===i[1])&&this.OOEvent_progress.apply(this,[e,i])},this)},t.extend(this.OOConfig,this.player.data("options")||{}),t("#coop_script").length<=0&&t('[data-requiremodule="ovpbasicplayer.coop"]').attr("id","coop_script"),(this.OOConfig.autoplay&&"1"==this.OOConfig.autoplay||1==this.OOConfig.cfs)&&e.delay(e.bind(this.create,this),1e3),this._setEvents()}function o(t){h.trigger("fnb.video.started",t)}function a(t){t.addClass("hide")}function r(t){t.removeClass("hide")}var h=t(document),l="fnbVideo",d=t(window),p=!1,c=null!=navigator.userAgent.match(/(android|iphone|ipad|blackberry|symbian|symbianos|symbos|netfront|model-orange|javaplatform|iemobile|windows phone|samsung|htc|opera mobile|opera mobi|opera mini|presto|huawei|blazer|bolt|doris|fennec|gobrowser|iris|maemo browser|mib|cldc|minimo|semc-browser|skyfire|teashark|teleca|uzard|uzardweb|meego|nokia|bb10|playbook)/gi)&&(screen.width>=480&&screen.height>=800||screen.width>=800&&screen.height>=480||navigator.userAgent.match(/ipad/gi)),f=".fnb_howto-video",u=".fnb_howto_cta";n.prototype._cookieLng=function(t){for(var e,i=document.cookie.split(";"),s=0,n=i.length,o=t+"=";n>s;s++){for(e=i[s];" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(o))return e.substring(o.length,e.length)}return null},n.prototype._getID=function(){return this.id?this.id:(this.player||(this.player=this._getPlayer()),this.id=this.player.attr("id"),this.id||(this.id=e.uniqueId("video_"),this.player.attr("id",this.id)),this.id)},n.prototype._getPlayer=function(){return this.player?this.player:(this.player=this.element.find("."+t.fn[l].className.videoPlayer),0===this.player.length&&(this.player=this.element),this.player)},n.prototype._getPoster=function(){return this.poster?this.poster:(this.poster=this.element.find("."+t.fn[l].className.posterFrame),this.poster)},n.prototype._setEvents=function(){d.on("orientationchange",function(){p=!0,e.delay(function(){p=!1},2e3)}).on("resize",e.debounce(e.bind(this.onResize,this),150)).on("scroll",e.debounce(e.bind(this.onScroll,this),150)).on("afterChange.slider",e.debounce(e.bind(this.onSlide,this),150)),h.on("click","#"+this.id+" .full_screen",e.bind(function(){this.canResize=!1,this.fullscreen=!0},this)),this.player.parent().hasClass("switch-video")||1==this.player.parent().data("switch-video")?this.player.on("mouseover touchstart","."+t.fn[l].className.posterFrame,e.bind(this.create,this)):this.player.on("click touchstart","."+t.fn[l].className.posterFrame,e.bind(this.create,this)),h.on("fnb.video.destroy",e.bind(function(t,e){e&&this.id!=e&&1!=this.OOConfig.cfs&&this.destroy()},this)),t(["[data-play=",this.id,"]"].join("")).on("click touchend",e.debounce(e.bind(function(t){t.preventDefault();var e=window["chanel_player_"+this.id],i=!1;if(e&&e.state)switch(e.state){case"playing":e.pause();break;case"paused":e.play(),i=!0;break;case"buffering":break;case"ready":e.play(),i=!0;break;default:i=!0,this.create()}else i=!0,this.create();i&&h.trigger("fnb.video.destroy",this.id)},this),500)),h.off("fnb.video.OOEvent_play").on("fnb.video.OOEvent_play",function(t,e){a(e.parents(f).find(u))}),h.off("fnb.video.OOEvent_destroy").on("fnb.video.OOEvent_destroy",function(t,e){r(e.parents(f).find(u))}),h.on("fnb.modal.created",function(){p=!0}).on("fnb.modal.closed",function(){p=!1})},n.prototype.getDimension=function(){var t=void 0!==this.player.data("options")&&this.player.data("options").format?parseInt(this.player.data("options").format):9,e=this.poster.height();Math.floor(e/t);return{width:e*(16/t),height:e}},n.prototype.create=function(){var s=t.extend(this.OOConfig,this.getDimension());this.settings.shoppable&&t.extend(s,{chapters:this.chapters}),i(!0),(this.player.parent().hasClass("switch-video")||1==this.player.parent().data("switch-video"))&&this.poster.hide(),0==this.player.parent().data("switch-video")&&this.poster.hide(),this.poster.fadeOut(e.bind(function(){window["chanel_player_"+this.id],s.autoplay;1==this.OOConfig.cfs?(this.OOConfig.purl=this.poster.attr("src"),this.OOConfig.dpf="1",this.canResize=!1,this.fullscreen=!0):s.autoplay&&"1"!=s.autoplay&&(s.autoplay="1"),this.coop=new Coop,this.coop.create(s)},this)),this.player.parent().find(".toFade").hide()},n.prototype.destroy=function(){this.player.parent().find(".toFade").css("z-index",-1);var t=window["chanel_player_"+this.id],e=this.element;t&&"destroyed"!==t.state&&(t.destroy(),this.wasFullscreen=!1,this.settings.shoppable&&this.OOEvent_chapterChanged(0)),e.css({height:this.getDimension().height,width:"auto"})},n.prototype.isVisible=function(){var t=d.scrollTop(),e=t+d.height(),i=this.player.offset().top,s=i+this.player.height();return e>=s&&i>=t},n.prototype.onResize=function(){e.delay(function(){this.canResize&&!p&&this.destroy()}.bind(this),50)},n.prototype.onScroll=function(){e.isNull(this)||e.isUndefined(this)||!this.canResize||this.isVisible()||p||this.destroy()},n.prototype.onSlide=function(e,i,s){this.canResize&&this.element.parents(".fnb-slider").length&&i.$slides[s]&&0===t(i.$slides[s]).has(this.element).length&&this.destroy()},n.prototype.OOEvent_chapterChanged=function(e){var i=t.fn[l].className.selected;t.each(this.chaptersElementsByTime,function(s){var n=Number(s),o=n===e||"first"===e&&0===n;t(this).toggleClass(i,o)})},n.prototype.OOEvent_fullscreenChanged=function(t){var i=window["plugin_oo_"+this.id];1!=this.OOConfig.cfs&&h.trigger("fnb.fullscreenchange",{isFullSreen:t}),this.fullscreen=t,t?(this.canResize=!1,this.OOConfig.eventlabel="fullscreen",o(e.cloneDeep(this.OOConfig))):i&&"ready"===i.state?(this.canResize=!0,this.destroy()):e.delay(e.bind(function(){this.canResize=!0},this),2e3)},n.prototype.OOEvent_destroy=function(){var t=window["chanel_player_"+this.id];if(t&&"destroyed"===t.state&&(c||!this.fullscreen&&!c)){this.fullscreen&&window["plugin_oo_"+this.id].hideFullscreen();this.player.height();this.player.css({width:"100%",height:""}).empty(),this.poster.appendTo(this.player).css({display:"block",opacity:1}),i(!1),this.isVisible()&&d.trigger("resize",!0)}h.trigger("fnb.video.OOEvent_destroy",[this.element])},n.prototype.OOEvent_play=function(t){if(h.trigger("fnb.video.OOEvent_play",[this.element]),this.OOConfig.eventlabel="play",o(e.cloneDeep(this.OOConfig)),1==this.OOConfig.cfs){var i=window["plugin_oo_"+this.id];i.onFsOn(!0)}},n.prototype.OOEvent_progress=function(t,i){e.includes(["0%","25%","50%","75%","playheadTimeChanged"],t)&&(i.time===i.duration&&(t="100%"),this.OOConfig.eventlabel="0%"==t?"video started":t,o(e.cloneDeep(this.OOConfig)))},n.prototype.OOEvent_pause=function(){this.OOConfig.eventlabel="pause",o(e.cloneDeep(this.OOConfig))},n.prototype.OOEvent_played=function(){var e=window["chanel_player_"+this.id];"ready"===e.state&&(this.settings.shoppable&&(this.OOEvent_chapterChanged(0),t('.fnb_look-slink [data-toggle="collapse"]').trigger("click")),this.fullscreen?window["plugin_oo_"+this.id].hideFullscreen():!this.player.data("options").loop||0==this.player.data("options").loop)},t.fn[l]=function(e){return this.each(function(){var i=t.data(this,"plugin_"+l);i&&"destroy"===e?i.destroy():i||t.data(this,"plugin_"+l,new n(this,e))})},t.fn[l].defaults={shoppable:!1,IMGURL:""},t.fn[l].className={videoPlayer:"fnb_video_player",posterFrame:"fnb_poster",slideVideo:"fnb_slide_video",selected:"fnb_selected",chapterType:"fnb_text-featured",productType:"fnb_product-featured"}}(jQuery,_);