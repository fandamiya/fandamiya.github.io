!function(){"use strict";define(["jquery","lodash","cssmap"],function(e,n,t){function i(n){n instanceof e||(n=e(document));var a=e(t(".","containerWithBg"),n),r=null!=navigator.userAgent.match(/(android|iphone|ipad|blackberry|symbian|symbianos|symbos|netfront|model-orange|javaplatform|iemobile|windows phone|samsung|htc|opera mobile|opera mobi|opera mini|presto|huawei|blazer|bolt|doris|fennec|gobrowser|iris|maemo browser|mib|cldc|minimo|semc-browser|skyfire|teashark|teleca|uzard|uzardweb|meego|nokia|bb10|playbook)/gi)&&(screen.width>=480&&screen.height>=800||screen.width>=800&&screen.height>=480||navigator.userAgent.match(/ipad/gi));a.length&&a.each(function(){e(this).fullBleedStyle(r)});var l=e(t(".","fullscreen"," > img",",.","fullscreen"," > a > img"),n),o=e(t(".","fullscreen","2 > img",",.","fullscreen","2 > a > img"),n),d=e(t(".","productImg"," > a > img"),n);(l.length||o.length||d.length)&&(l.fullbleed({direction:"landscape"}),o.fullbleed({direction:"portrait"}),d.fullbleed({direction:"portrait"}),i.events())}var a=e("body").hasClass("ie8");return e.fn.fullbleed=function(i){function r(t){var l=e(t.target).addClass(e.fn.fullbleed.cssmap.loaded),o=null,d=null;a&&(o="marginLeft",d=-((l.width()-window.innerWidth)/2),"portrait"===i.direction&&(o="marginTop",d=-(l.height()/2))),n.isNull(o)||n.isNull(d)||l.css(o,d),l.off("load",r).show(),e(document).trigger("fnb.fullbleed.loaded")}return i=e.extend({},e.fn.fullbleed.defaults,i),this.each(function(){if(("IMG"!==this.tagName||e(this).parents(".container").length>0)&&e(this).parents(t(".","productImg")).length<=0)return!0;var i=e(this),a=i.attr("src"),l=window.innerWidth<1024?i.data("768")||a:window.innerWidth<1366?i.data("1024")||a:window.innerWidth<1600?i.data("1366")||a:i.data("1600")||a,o=i.attr("data-lazy");a!==l?n.isUndefined(o)||""===n.trim(o)||o===!1?i.attr("src",l).on("load",r):i.attr("data-lazy",l).on("load",r):r({target:this})})},e.fn.fullBleedStyle=function(n){function t(e){var t,r={};window.innerWidth<1024?(r=a.data("768"),t=0):window.innerWidth<1366?(r=a.data("1024"),t=1):window.innerWidth<1600?(r=a.data("1366"),t=2):(r=a.data("1600"),t=3),(e||i!==t)&&(void 0!==r&&(a.css(r),n&&a.css("background-attachment","scroll")),i=t)}var i=1,a=this;e(window).on("resize",t),t(!0)},e.fn.fullbleed.defaults={direction:"landscape"},e.fn.fullbleed.cssmap={loaded:t("load")},i.events=n.once(function(){e(window).on("resize",n.debounce(i,150))}),{init:i}})}();