!function(t,e,a){"use strict";function n(a,n){var s,r,o,d=1;for(this.element=t(a),this.settings=t.extend({},t.fn[i].defaults,n),this.dataNames=[];1===d||this._getAttr("target",d);)this.dataNames.push(this._getDataNames(d)),d++;for(this.dataName=this.dataNames[0],s=0,r=this.dataName.events.length;r>s;s++)o=this.dataName.origine[s]||this.dataName.origine[0]||"global",("self"===o?this.element:t(document)).on(this.dataName.events[s],e.bind(this._reactToEvent,this))}var i="dynamicEventListener",s={events:[],couples:[],origine:[],target:"",hide:[]};n.prototype._getAttr=function(e,a){var n=a&&a>1?"-"+a:"",s=t.fn[i].dataMap,r=s[e]+n;return this.element.data(r)},n.prototype._getDataNames=function(t){var a,n,i=e.clone(s);for(a in i)i.hasOwnProperty(a)&&(n=this._getAttr(a,t),e.isString(i[a])?(i[a]=n,e.isString(this.settings[a])&&this.settings[a].length>0&&(i[a]=this.settings[a])):e.isArray(i[a])&&(e.isString(this.settings[a])&&this.settings[a].length>0?i[a]=e.union(i[a],this.settings[a].split(" ")):e.isArray(this.settings[a])&&(i[a]=e.union(i[a],this.settings[a])),n&&(i[a]=e.union(i[a],n.split(" ")))));return i},n.prototype._reactToEvent=function(t,a){var n=this;e.forEach(this.dataNames,function(t){0!==t.couples.length&&e.forEach(t.couples,function(e){""!==e&&n._applyChange(a,e,t)})})},n.prototype._parseCouple=function(t){var e=t.split("="),a=e[0].split("."),n={method:a[0],name:a[1],data:e[1]};return"hide"===n.method&&(n.name=e[1],n.data=a[1]),n},n.prototype._applyChange=function(t,n,i){var s=i.target&&i.target.length>0&&"self"!==i.target?this.element.find(i.target):this.element,r=this._parseCouple(n),o=t.data&&t.data[r.data]!==a?t.data[r.data]:t.attr&&t.attr[r.data]!==a?t.attr[r.data]:null;if(null!==o&&s.length){if(!e.isFunction(this[r.method])||"_"===r.method.substr(0,1))throw new Error("Bad method");this[r.method](s,r.name,o)}},n.prototype.attr=function(t,e,a){if("html"===e&&"html"in t)t.html(a);else{if(!("attr"in t))throw new Error("Bad context!");t.attr(e,a)}},n.prototype.data=function(t,e,a){if(!("data"in t))throw new Error("Bad context!");t.data(e)!==a&&t.data(e,a).trigger("fnb.change.data."+e,{origine:t,data:t.data()})},n.prototype.select=function(e,a,n){var s=t.fn[i].classMap,r=t("[data-"+a+"]",e),o=t("[data-"+a+"="+n+"]",e);"value"===a&&(r=r.add("[value]"),o=o.add("[value="+n+"]")),e[0]&&"SELECT"===e[0].nodeName?e.prop("selectedIndex")!==o.index()&&e.prop("selectedIndex",o.index()).trigger("change"):(r.removeClass(s.selected),o.addClass(s.selected))},n.prototype.filter=function(e,a,n){var s=t.fn[i].classMap,r=t("[data-"+a+"]",e),o=t("[data-"+a+'*="'+n+'"]',e);r.removeClass(s.filtered),o.addClass(s.filtered)},n.prototype.hide=function(e,a,n){var s=t.fn[i].classMap;e.toggleClass(s.hidden,a===n.toString())},t.fn[i]=function(e){return this.each(function(){t.data(this,"plugin_"+i)||t.data(this,"plugin_"+i,new n(this,e))})},t.fn[i].defaults={events:null,couples:null,origine:null,target:null},t.fn[i].classMap={selected:"fnb_selected",filtered:"fnb_filtered",hidden:"fnb_invisible"},t.fn[i].dataMap={events:"listened-events",origine:"event-origine",couples:"event-couples",target:"event-target",hide:"event-hide"}}(jQuery,_);