!function(t,i){"use strict";function s(s,e){this.element=s,this.top=s.offset().top,this.offset=e&&e.offset||0,this.position=s.css("position"),this.navigation=e.baseNavigation,this.productNav=e.productNav,this.stickyCheckout=e.stickyCheckout,this.bill=e.bill,this.checkoutDisplay=e.checkoutDisplay,this.isCheckoutPage=this.stickyCheckout?!!this.stickyCheckout.length:0,this.isProductPage=!!this.productNav.length,this.scrollPos=0,this.up=!1,this.oldIE=!t.support.leadingWhitespace,this.events(),this.isCheckoutPage&&(this.btn=this.stickyCheckout.find(".sticky-cta a").first(),this.initEventsCheckout()),i.delay(i.bind(this.chkstick,this),300)}var e=t(window),o=t("body").first(),n=navigator.userAgent.match(/ipad/gi);s.prototype={stick:function(){var i=this.element.css("position");("fixed"!==i||this.isProductPage)&&(this.element.addClass("isfixed").css({width:"100%",position:"fixed",top:this.offset}),t(document).trigger("fnb.sticky.on"),o.addClass("fnb_sticky-fixed"))},unstick:function(){var i=this.element.css("position");"fixed"===i&&(this.isProductPage&&e.scrollTop()+this.offset>=this.top?(o.removeClass("fnb_sticky-fixed"),t(document).trigger("fnb.sticky.off"),this.up?(t(this.element).css({width:"100%",position:"fixed",top:this.offset}),o.addClass("fnb_sticky-fixed"),t(document).trigger("fnb.sticky.on")):(t(this.element).css({width:"100%",position:"fixed",top:this.offset}),o.removeClass("fnb_sticky-fixed"),t(document).trigger("fnb.sticky.on"))):(this.element.removeClass("isfixed").css({position:this.position,top:"",width:""}),o.removeClass("fnb_sticky-fixed"),t(document).trigger("fnb.sticky.off")))},chkstick:function(){var s=this,n=e.scrollTop();if(s.scrollPos>=n){if(this.lockScroll)return;s.up=!1,s.stepMove=s.stepMove>-1?s.stepMove--:s.stepMove}else s.up=!0,s.stepMove=s.stepMove<2?s.stepMove++:s.stepMove;if(s.scrollPos=n,s.isCheckoutPage)if(s.inView(s.bill))s.element.addClass(s.checkoutDisplay),o.removeClass("fnb_sticky-fixed"),t(document).trigger("fnb.sticky.off");else if(s.element.removeClass(s.checkoutDisplay),s.up)o.addClass("fnb_sticky-fixed"),t(document).trigger("fnb.sticky.on");else{var c=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;t(window).innerHeight()+c<document.body.offsetHeight-100&&(o.removeClass("fnb_sticky-fixed"),t(document).trigger("fnb.sticky.off"))}else{n+s.offset>s.top&&s.up?this.stick():i.delay(i.bind(this.unstick,this),150),0===n?(o.addClass("fnb_sticky-isOnTop"),t(document).trigger("fnb.sticky.is.top")):o.removeClass("fnb_sticky-isOnTop");var h=60+this.element.height();t(".fnb_zone-communication").length>0&&(h+=t(".fnb_zone-communication").height()),t(document).find(this.element).length&&this.top<h&&t(document).find(".fnb_breadcrumb").length&&(t(".fnb_breadcrumb").css({"margin-top":"65px"}),t(".fnb_products-container").find(".fnb_title").first().css({"margin-top":"100px"}))}},chkstickIpad:function(t){var s=t?t.originalEvent.touches[0].pageY:e.scrollTop();return this.scrollPos===s||this.scrollPos>s&&this.scrollPos-s<20||this.scrollPos<s&&this.scrollPos-s>-10?!0:(this.scrollPos>=s?this.up=!1:this.up=!0,this.isCheckoutPage&&!this.showSticky?void e.trigger("fnb_sticky-show"):void(s+this.offset>this.top&&this.up?this.stick():i.delay(i.bind(this.unstick,this),300)))},onTouchStartIpad:function(t){this.scrollPos=t.originalEvent.touches[0].pageY},onRemoveElementInView:function(){if(this.isCheckoutPage){if(this.inView(this.bill))return this.element.addClass(this.checkoutDisplay),o.removeClass("fnb_sticky-fixed"),t(document).trigger("fnb.sticky.off"),void(this.showSticky=!0);this.element.removeClass(this.checkoutDisplay),o.addClass("fnb_sticky-fixed"),t(document).trigger("fnb.sticky.on"),this.showSticky=!1}},onStickyShow:function(){this.showSticky||(this.element.removeClass(this.checkoutDisplay),this.up&&!o.hasClass("fnb_sticky-fixed")?(o.addClass("fnb_sticky-fixed"),t(document).trigger("fnb.sticky.on")):o.hasClass("fnb_sticky-fixed")&&(o.removeClass("fnb_sticky-fixed"),t(document).trigger("fnb.sticky.off")))},inView:function(i){if(!i||!i.length)return!1;var s=e.scrollTop(),o=s+t(document).height(),n=i.offset().top,c=n+i.height();return o>=n+60&&c>=s+60},initEventsCheckout:function(){var t=this;this.btn.length&&this.btn.on("click",function(i){i.preventDefault(),t.bill.find("button").trigger("click")})},events:function(){n?e.on("scrollend touchmove",i.debounce(i.bind(this.chkstick,this),150)):e.on("scroll",i.throttle(i.bind(this.chkstick,this),150)),e.on("fnb_sticky_scrolLock_scrollStart",i.bind(function(){this.lockScroll=!0},this)).on("fnb_sticky_scrolLock_scrollEnd",i.bind(function(){this.lockScroll=!1},this))}},t.fn.sticky=function(i){return i=t.extend({},t.fn.sticky.defaults,i),this.each(function(){var e=t(this),o=e.data("sticky");o?o.offset=i.offset:e.data("sticky",new s(e,i)),/filter=/.test(window.location.href)&&require(["modules.scroll","cssmap"],function(i,s){var e=t(s("#","productsGrid"," .","headerSection")).first(),o=e.find(s(".","mainDescription")),n=t(s("#","productsGrid")).find(s(".","productGrid")).first();i.moveTo(e),t(document).on("fnb.sticky.on",function(){t(s(".","productsNavigation")).hasClass("isfixed")&&(o.length?n.css("paddingTop","20px"):n.css("paddingTop","50px"))})})})},t.fn.sticky.defaults={offset:0}}(jQuery,_);