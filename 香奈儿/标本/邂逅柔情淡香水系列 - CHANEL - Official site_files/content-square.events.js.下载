!function(){"use strict";define(["jquery","lodash","settings","cssmap","utils.error","modules.signin"],function(e,n,a,c,t,o){function r(e,n,a){var c=n[a].match(/%[a-zA-Z\-]*%/g);if(c){if(1===c.length){var t=e.data(c[0].replace(/%/g,""));return void(t&&(n[a]=n[a].replace(c[0],t)))}for(var o=0;o<c.length;o++){var t=e.data(c[o].replace(/%/g,""));t&&(n[a]=n[a].replace(c[o],t))}}}function i(a,c){q=!1;for(var t in c)/^:locator/.test(c[t])?(q=!0,e(window).on("hashchange",function(){c[t]=c[t].replace(":locator",window.location.pathname+window.location.hash.replace("#","?__")),r(a,c,t),u(c)})):n.isObject(c[t])?i(a,c[t]):r(a,c,t);q===!1&&u(c)}function u(e){q=!1,window._uxa.push(e)}function s(a,c,t){var o={},r=t===!0?c:e(c.currentTarget);a&&(o=n.clone(a),i(r,o))}function d(e){require(["modules.cSquare.base"],function(e){e.init(),w()})}function l(){var n=e("[data-square]");n.length&&(n.each(function(c,t){var o=e(t);o.data("square")&&a.cSquare[n.data("square")]&&s(a.cSquare[o.data("square")],o,!0)}),window._uxa.push(["ecommerce:send"]))}function f(){var c=e(document);n.each(h,function(e,t){c.on("click",e,n.debounce(n.partial(s,a.cSquare[t]),100,!0))})}function v(){n.each(m,function(c,t){e(document).on(c.eventName,c.selector,n.debounce(n.partial(s,a.cSquare[t]),100,!0))})}var q,h={"quick-buy":c(".","quickBuy"),"new-address":c(".","newAddressBtn",":visible"),"cancel-new-address":c(".","cancelAddressBtn"),storelocator:c(".","storeBtn")},m={"close-quick-buy":{eventName:"fnb.sq.modal.close",selector:c(".","quickBuyBloc")},"address-validate":{eventName:"fnb.sq.form.validate",selector:c(".","divSubmitValide")}},w=n.once(function(){f(),v(),l()});return{init:d}})}();